# BackstagePass - Projekt Status

**Stand:** 2026-02-16

---

## Milestone Ãœbersicht

| Milestone | Status | Open | Closed | Due Date |
|-----------|--------|------|--------|----------|
| **Modul 0** | In Progress | 5 | 6 | 2026-02-06 |
| **Modul 1** | In Progress | 15 | 4 | - |
| **Modul 2** | âœ… Done | 0 | 4 | - |
| **Modul 3** | In Progress | 6 | 4 | - |
| **Helfer Liste** | âœ… Done | 3 | 17 | 2026-02-28 |
| **UserExperience** | In Progress | 7 | 5 | - |

**Gesamt:** 36 Open, 40 Closed

---

## Modul 0 - Foundation & Setup

**Beschreibung:** Fundament fÃ¼r alle Module - Authentifizierung & Mitgliederverwaltung

| # | Status | Titel |
|---|--------|-------|
| #83 | ğŸŸ¡ Open | Epic: Fundament fÃ¼r alle Module |
| #84 | ğŸŸ¡ Open | 0.1 Benutzer-Authentifizierung & Login-System |
| #85 | ğŸŸ¡ Open | 0.2 Mitgliederprofil & Benutzerverwaltung |
| #86 | ğŸŸ¡ Open | 0.3 Rollenmanagement & Permissions |
| #87 | ğŸŸ¡ Open | 0.4 Audit Log & Activity Tracking |
| #88 | âœ… Closed | 0.1 Benutzer-Authentifizierung & Login-System |
| #89 | âœ… Closed | 0.2 Mitgliederprofil & Benutzerverwaltung |
| #90 | âœ… Closed | 0.3 Rollenmanagement & Permissions |
| #91 | âœ… Closed | 0.4 Audit Log & Activity Tracking |
| #105 | âœ… Closed | Auth-System Supabase SSR + Next.js App Router |
| #107 | âœ… Closed | 0.5 Basis-Layout fÃ¼r Admin-Dashboard |

---

## Modul 1 - Vereinsleben & HelfereinsÃ¤tze

**Beschreibung:** Core Features - Mitglieder, Veranstaltungen, Events

| # | Status | Titel |
|---|--------|-------|
| #57 | ğŸŸ¡ Open | Epic: Vereinsleben & HelfereinsÃ¤tze zentral abbilden |
| #58 | ğŸŸ¡ Open | Vereinsevents verwalten (Erstellen/Planen/Anmelden) |
| #59 | ğŸŸ¡ Open | Externe HelfereinsÃ¤tze abbilden |
| #60 | ğŸŸ¡ Open | PersÃ¶nliche Einsatz- und KalenderÃ¼bersicht |
| #61 | ğŸŸ¡ Open | Epic: Operative AuffÃ¼hrungslogistik effizient planen |
| #62 | ğŸŸ¡ Open | AuffÃ¼hrungen mit ZeitblÃ¶cken planen |
| #63 | ğŸŸ¡ Open | Ressourcen & RÃ¤ume verwalten |
| #64 | ğŸŸ¡ Open | Einsatz-Templates fÃ¼r wiederkehrende AblÃ¤ufe |
| #70 | ğŸŸ¡ Open | Feature: Events anlegen und verwalten |
| #71 | ğŸŸ¡ Open | Feature: An- und Abmeldung zu Events |
| #72 | ğŸŸ¡ Open | Feature: Rollen und Schichten fÃ¼r HelfereinsÃ¤tze |
| #73 | ğŸŸ¡ Open | Feature: Meine EinsÃ¤tze und Helferstunden einsehen |
| #75 | ğŸŸ¡ Open | Feature: AuffÃ¼hrungen und Spieltermine verwalten |
| #76 | ğŸŸ¡ Open | Feature: Helfer-Schichten pro AuffÃ¼hrung definieren |
| #77 | ğŸŸ¡ Open | Feature: RÃ¤ume und technische Ressourcen verwalten |
| #92 | âœ… Closed | Epic: Vereinsleben & HelfereinsÃ¤tze zentral abbilden |
| #93 | âœ… Closed | 1.1 Vereinsevents verwalten |
| #94 | âœ… Closed | 1.2 Externe HelfereinsÃ¤tze abbilden |
| #95 | âœ… Closed | 1.3 PersÃ¶nliche Einsatz- und KalenderÃ¼bersicht |

---

## Modul 2 - Operative AuffÃ¼hrungslogistik âœ…

**Beschreibung:** AuffÃ¼hrungen, Ressourcen, Templates - **ABGESCHLOSSEN**

| # | Status | Titel |
|---|--------|-------|
| #96 | âœ… Closed | Epic: Operative AuffÃ¼hrungslogistik effizient planen |
| #97 | âœ… Closed | 2.1 AuffÃ¼hrungen mit ZeitblÃ¶cken planen |
| #98 | âœ… Closed | 2.2 Ressourcen & RÃ¤ume verwalten |
| #99 | âœ… Closed | 2.3 Einsatz-Templates fÃ¼r wiederkehrende AblÃ¤ufe |

---

## Modul 3 - KÃ¼nstlerische Planung

**Beschreibung:** StÃ¼cke, Besetzungen, Proben

| # | Status | Titel | Labels |
|---|--------|-------|--------|
| #100 | âœ… Closed | Epic: KÃ¼nstlerische Planung | - |
| #101 | âœ… Closed | 3.1 StÃ¼ck, Szenen und Rollen strukturieren | - |
| #102 | âœ… Closed | 3.2 Besetzung verwalten | - |
| #103 | âœ… Closed | 3.3 Probenplanung mit kÃ¼nstlerischen Funktionen | - |
| #109 | ğŸŸ¡ Open | fix(db): RLS Policy fÃ¼r Teilnehmer-Status | bug, prio:high |
| #110 | ğŸŸ¡ Open | refactor: TypeScript 'any' Casts ersetzen | enhancement |
| #111 | ğŸŸ¡ Open | fix(ui): confirm() durch Modal ersetzen | enhancement |
| #112 | ğŸŸ¡ Open | perf(db): Index auf proben_teilnehmer.status | enhancement |
| #113 | ğŸŸ¡ Open | test: Tests fÃ¼r KÃ¼nstlerische Planung | enhancement |
| #114 | ğŸŸ¡ Open | fix: Server-side Authorization Check | enhancement |

---

## Helfer Liste (Feature) âœ…

**Beschreibung:** Helferliste zur strukturierten Planung und Besetzung von Helferrollen
**Due:** 2026-02-28
**Status:** IMPLEMENTIERT (2026-01-27)

### Implementierte Funktionen

#### Database (4 Issues) âœ…
| # | Status | Titel |
|---|--------|-------|
| #115 | âœ… Done | DB: Create helfer_events table and RLS policies |
| #116 | âœ… Done | DB: Create helfer_rollen_templates table and RLS policies |
| #117 | âœ… Done | DB: Create helfer_rollen_instanzen table and RLS policies |
| #118 | âœ… Done | DB: Create helfer_anmeldungen table and RLS policies |

**Migration:** `20260227000000_helferliste.sql`
- 4 Tabellen mit RLS Policies
- Helper Functions fÃ¼r Auth-Checks
- Seed-Daten fÃ¼r Templates

#### Backend/API (6 Issues) âœ…
| # | Status | Titel |
|---|--------|-------|
| #119 | âœ… Done | Integrate helferliste actions with audit logging |
| #120 | âœ… Done | API: Implement CRUD for helfer_events |
| #121 | âœ… Done | API: Implement CRUD for helfer_rollen_instanzen |
| #122 | âœ… Done | API: Implement HelferAnmeldungen actions |
| #123 | âœ… Done | API: Implement double-booking/overlap prevention |
| #131 | âœ… Done | API: Implement public link generation |

**Server Actions:**
- `lib/actions/helferliste.ts` - Haupt-CRUD fÃ¼r Events, Rollen, Anmeldungen
- `lib/actions/helfer-templates.ts` - Template-Verwaltung

#### Frontend/UI (7 Issues) âœ…
| # | Status | Titel |
|---|--------|-------|
| #124 | âœ… Done | UI: Admin page for HelferEvent creation/management |
| #125 | âœ… Done | UI: Implement HelferAnmeldung forms |
| #126 | âœ… Done | UI: Admin page for HelferRollenTemplate management |
| #127 | âœ… Done | UI: Member/Public view for HelferEvents/Rollen |
| #128 | âœ… Done | UI: Admin dashboard for HelferAnmeldungen management |
| #129 | âœ… Done | UI: Admin component for HelferRollenInstanz management |
| #134 | âœ… Done | Improve error handling and UI feedback |

**Routes:**
- `/helferliste` - Events-Liste
- `/helferliste/neu` - Neues Event erstellen
- `/helferliste/[id]` - Event-Details mit Rollen-Management
- `/helferliste/templates` - Templates-Verwaltung
- `/helferliste/templates/neu` - Neues Template
- `/helfer/[token]` - Ã–ffentliche Ansicht fÃ¼r externe Helfer

**Components:** 12 Komponenten in `components/helferliste/`

#### Ausstehend (3 Issues)
| # | Status | Titel | Grund |
|---|--------|-------|-------|
| #130 | ğŸŸ¡ Deferred | Email notifications | Erfordert Email-Infrastruktur |
| #132 | ğŸŸ¡ Deferred | Unit/Integration tests | Optional |
| #133 | ğŸŸ¡ Deferred | End-to-End tests | Optional |

---

## UserExperience

**Beschreibung:** Rollenbasierte UI/UX Verbesserungen

| # | Status | Titel |
|---|--------|-------|
| #137 | âœ… Closed | [UX] Navigation-Konfiguration zentralisieren |
| #138 | âœ… Closed | [UX] Rollenbasierte Redirects implementieren |
| #139 | âœ… Closed | [UX] Sidebar-Komponente erstellen |
| #140 | âœ… Closed | [UX] Header-Komponente anpassen |
| #141 | âœ… Closed | [UX] Layout-Struktur fÃ¼r Bereiche implementieren |
| #142 | ğŸŸ¡ Open | [UX] Management-Dashboard erweitern |
| #143 | âœ… Closed | [UX] Mein-Bereich Dashboard fÃ¼r aktive Mitglieder (via #317) |
| #144 | ğŸŸ¡ Open | [UX] Mein-Bereich fÃ¼r passive Mitglieder |
| #145 | âœ… Closed | [UX] Helfer-Dashboard erstellen (via #318) |
| #146 | ğŸŸ¡ Open | [UX] Partner-Portal erstellen |
| #147 | ğŸŸ¡ Open | [UX] Willkommen-Seite fÃ¼r GÃ¤ste/Freunde |

---

## Changelog

### 2026-02-16: Dashboard-Konsolidierung & Template-Editor Complete

#### Dashboard & Mein-Bereich Merge (PR #317)
Zentrale Dashboard-Seite fÃ¼r alle Rollen implementiert:
- ADMIN/VORSTAND: Vorstand-Dashboard (3-SÃ¤ulen-Layout)
- MITGLIED_AKTIV: PersÃ¶nliches Dashboard (Outlook-Style mit Kalender, Profil, Widgets)
- MITGLIED_PASSIV: Vereinfachte Ansicht
- `/mein-bereich` â†’ Redirect zu `/dashboard`
- Neue "Mitglieder-Ansicht" fÃ¼r Vorstand
- 14 Dateien angepasst, 18 `revalidatePath` ergÃ¤nzt

#### Helfer-Dashboard (PR #318)
Authentifizierter Bereich fÃ¼r HELFER-Rolle:
- `/meine-einsaetze` - PersÃ¶nliche EinsatzÃ¼bersicht
- Dashboard mit kommenden Schichten und Historie
- Filter nach Status (bestÃ¤tigt, ausstehend, abgelehnt)

#### Template-Editor VollstÃ¤ndig Editierbar (PRs #307-#315)
Alle Template-Elemente jetzt inline editierbar:
- **nur_mitglieder-Flag** (#307): Schichten nur fÃ¼r Vereinsmitglieder markieren
- **Info-BlÃ¶cke** (#308): Titel, Beschreibung, Start/Endzeit editieren
- **Sachleistungen** (#309): Name, Anzahl, Beschreibung editieren
- **Ressourcen** (#310): Menge editieren
- **Zod v4 Bug-Fix** (#311-#315): UUID-Validierung fÃ¼r Seed-Daten korrigiert

#### Email-Integration
- SMTP-Konfiguration und Verification
- Email-Versand fÃ¼r Helfer-Registrierung
- BuchungsbestÃ¤tigungen fÃ¼r AuffÃ¼hrungen

### 2026-02-05: M1 - Datenmodell & Templates Complete

#### Template-System Erweiterung (Issue #171)
- Neue DB-Tabellen: `template_info_bloecke`, `info_bloecke`, `template_sachleistungen`, `sachleistungen`
- Offset-basiertes Zeitsystem (siehe ADR-001)
- TypeScript-Typen erweitert (`TemplateMitDetails`)
- Server Actions fÃ¼r CRUD-Operationen
- UI-Komponenten fÃ¼r Info-BlÃ¶cke und Sachleistungen
- Seed-Daten: "Abendvorstellung" Template mit 10 Schichten + 2 Info-BlÃ¶cken

### 2026-01-27: Helferliste Feature - VollstÃ¤ndig implementiert

**Neue Dateien:**

| Datei | Beschreibung |
|-------|--------------|
| `supabase/migrations/20260227000000_helferliste.sql` | Database Migration |
| `lib/actions/helferliste.ts` | Server Actions (Events, Rollen, Anmeldungen) |
| `lib/actions/helfer-templates.ts` | Server Actions (Templates) |
| `app/(protected)/helferliste/page.tsx` | Events-Liste |
| `app/(protected)/helferliste/neu/page.tsx` | Neues Event |
| `app/(protected)/helferliste/[id]/page.tsx` | Event-Details |
| `app/(protected)/helferliste/templates/page.tsx` | Templates-Liste |
| `app/(protected)/helferliste/templates/neu/page.tsx` | Neues Template |
| `app/(public)/helfer/[token]/page.tsx` | Ã–ffentliche Helfer-Ansicht |
| `components/helferliste/*.tsx` | 12 UI-Komponenten |

**GeÃ¤nderte Dateien:**

| Datei | Ã„nderung |
|-------|----------|
| `lib/supabase/types.ts` | Neue Typen fÃ¼r Helferliste |
| `lib/supabase/auth-helpers.ts` | Neue Permissions (helferliste:*) |
| `lib/navigation.ts` | Navigation fÃ¼r /helferliste hinzugefÃ¼gt |

### Build-Fixes

| Datei | Problem | LÃ¶sung |
|-------|---------|--------|
| `app/page.tsx` | `let` statt `const` | GeÃ¤ndert zu `const` |
| `app/(protected)/hilfe/page.tsx` | Static Generation + Cookies | `force-dynamic` hinzugefÃ¼gt |
| `app/(protected)/hilfe/[slug]/page.tsx` | Static Generation + Cookies | `force-dynamic` hinzugefÃ¼gt |
| `app/(protected)/dashboard/page.tsx` | Unbenutzte Variable `nextWeek` | Entfernt |

---

## Statistik

```
Total Issues:     76 (36 open, 40 closed)
Milestones:       6

Progress by Milestone:
â”œâ”€â”€ Modul 0:       55% (6/11 closed)
â”œâ”€â”€ Modul 1:       21% (4/19 closed)
â”œâ”€â”€ Modul 2:      100% (4/4 closed) âœ…
â”œâ”€â”€ Modul 3:       40% (4/10 closed)
â”œâ”€â”€ Helfer Liste:  85% (17/20 closed) âœ…
â””â”€â”€ UserExperience: 64% (7/11 closed)
```

## Aktuelle Entwicklungen (Feb 2026)

### Abgeschlossene Features
- âœ… Template-Editor vollstÃ¤ndig editierbar (alle Elemente inline)
- âœ… Dashboard-Konsolidierung (einheitliche Startseite fÃ¼r alle Rollen)
- âœ… Helfer-Dashboard mit persÃ¶nlicher EinsatzÃ¼bersicht
- âœ… Email-Integration (SMTP, RegistrierungsbestÃ¤tigungen)
- âœ… nur_mitglieder-Flag fÃ¼r Template-Schichten
- âœ… Zod v4 KompatibilitÃ¤t

### In Bearbeitung
- ğŸ”„ Partner-Portal (#146)
- ğŸ”„ Passive Mitglieder Ansicht (#144)
- ğŸ”„ Willkommen-Seite fÃ¼r GÃ¤ste (#147)
- ğŸ”„ Management-Dashboard Erweiterungen (#142)

### Technische Verbesserungen
- Server Actions mit robustem Error Handling
- revalidatePath fÃ¼r alle relevanten Routen
- TypeScript-Typsicherheit durchgÃ¤ngig
- Konsistente UI-Patterns Ã¼ber alle Module

---

*Aktualisiert am 2026-02-16*
